{"version":3,"file":"02-molecule/sq-modal/sq-modal.js","mappings":"CACA,SAAWA,EAAGC,EAAQC,GACpBD,EAAOE,UAAUC,WAAa,CAC5BC,OAAQ,SAAUC,EAASC,GAYzB,SAASC,EAAmBC,GAC1B,IAAIC,EAAQD,EAAME,KAAK,+BACnBD,EAAME,QACRF,EAAM,GAAGG,OAEb,CAhBAX,EAAK,aAAc,iCAAkCI,GAASQ,QAAQ,SAAUC,GAC9Ef,EAAEe,GAASC,MAAM,WACf,IAAIC,EAAUjB,EAAEkB,MAAMC,KAAK,aACvBT,EAAQV,EAAE,IAAMiB,GAASN,KAAK,+BAC9BD,EAAME,QACRF,EAAM,GAAGG,OAEb,EACF,GA4BAX,EAAK,kBAAmB,8BAA+BI,GAASQ,QAAQ,SAAUC,GAChFf,EAAEe,GAASC,MAAM,SAAUI,GACzB,IAAIX,EAAQT,EAAEkB,MAAMG,QAAQ,WAC5Bb,EAAmBC,GAEC,CAClB,qFACA,sFAGYK,QAAQ,SAAUQ,GAC1BtB,EAAEkB,MAAMG,QAAQ,6BAA6BV,KAAKW,GAAUV,SAC9DQ,EAAMG,iBACNH,EAAMI,kBACNvB,EAAOwB,gBAAgBhB,EAAM,GAAIR,EAAOM,UACxCmB,SAASC,SAEb,EAAEC,KAAKV,MACT,EACF,GAEAhB,EAAK,oBAAqB,UAAWI,GAASQ,QAAQ,SAAUC,GAC9Df,EAAEe,GAASc,GAAG,mBAAoB,WAvCpC,IACMC,EAuCFtB,EAAmBR,EAAEkB,QAvCnBY,EAAc9B,EAAE,uFACJY,QACdZ,EAAE+B,KAAK,CACLC,IAAKF,EAAYG,KAAK,YACtBC,KAAM,MACNC,QAAS,SAASC,GAChBN,EAAYO,KAAKrC,EAAEoC,GAAUzB,KAAK,sFAAsF0B,QACxHpC,EAAOqC,gBAAgBR,EAAY,GAAI7B,EAAOM,SAChD,EACAgC,MAAO,WACLC,QAAQD,MAAM,qBAChB,GA8BJ,EACF,EACF,EAEH,CApED,CAoEGE,OAAQxC,OAAQC","sources":["webpack://tra-components/./src/02-molecule/sq-modal/sq-modal.es6.js"],"sourcesContent":["// @todo this js for the most part should be specific to this site and not part of the component.\n(function ($, Drupal, once) {\n  Drupal.behaviors.modalAlert = {\n    attach: function (context, settings) {\n      once('modalAlert', '.molecule--sq-modal--trigger a', context).forEach(function (element) {\n        $(element).click(function () {\n          var modalId = $(this).attr('data-open');\n          var video = $('#' + modalId).find('.bf-videojs-container video');\n          if (video.length) {\n            video[0].pause();\n          }\n        });\n      });\n\n      // Function to pause and reset brandfolder Video\n      function pauseAndResetVideo(modal) {\n        var video = modal.find('.bf-videojs-container video');\n        if (video.length) {\n          video[0].pause();\n        }\n      }\n\n      // Function to reload the form\n      function reloadForm() {\n        var formWrapper = $('#webform-submission-email-selected-form-wizard-items-block-content-16731-form-ajax');\n        if (formWrapper.length) {\n          $.ajax({\n            url: formWrapper.data('ajax-url'),\n            type: 'GET',\n            success: function(response) {\n              formWrapper.html($(response).find('#webform-submission-email-selected-form-wizard-items-block-content-16731-form-ajax').html());\n              Drupal.attachBehaviors(formWrapper[0], Drupal.settings);\n            },\n            error: function() {\n              console.error('Form reload failed');\n            }\n          });\n        }\n      }\n\n      once('modalCloseAlert', '.close-button, .okay-button', context).forEach(function (element) {\n        $(element).click(function (event) {\n          var modal = $(this).closest('.reveal');\n          pauseAndResetVideo(modal);\n\n          var formSelectors = [\n            '#webform-submission-email-selected-form-wizard-items-block-content-16731-form-ajax',\n            '#webform-submission-email-selected-form-wizard-items-block-content-18316-form-ajax'\n          ];\n\n          formSelectors.forEach(function (selector) {\n            if ($(this).closest('#modal--form-explorer-app').find(selector).length) {\n              event.preventDefault(); // Prevent default action\n              event.stopPropagation();\n              Drupal.detachBehaviors(modal[0], Drupal.settings);\n              location.reload();\n            }\n          }.bind(this));\n        });\n      });\n\n      once('modalCloseOutside', '.reveal', context).forEach(function (element) {\n        $(element).on('closed.zf.reveal', function () {\n          pauseAndResetVideo($(this));\n          reloadForm();\n        });\n      });\n    }\n  };\n})(jQuery, Drupal, once);\n"],"names":["$","Drupal","once","behaviors","modalAlert","attach","context","settings","pauseAndResetVideo","modal","video","find","length","pause","forEach","element","click","modalId","this","attr","event","closest","selector","preventDefault","stopPropagation","detachBehaviors","location","reload","bind","on","formWrapper","ajax","url","data","type","success","response","html","attachBehaviors","error","console","jQuery"],"sourceRoot":""}