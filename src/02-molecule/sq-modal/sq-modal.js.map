{"version":3,"file":"02-molecule/sq-modal/sq-modal.js","mappings":"CACA,SAAWA,EAAGC,EAAQC,GACpBD,EAAOE,UAAUC,WAAa,CAC5BC,OAAQ,SAAUC,EAASC,GAYzB,SAASC,EAAmBC,GAC1B,IAAIC,EAAQD,EAAME,KAAK,+BACnBD,EAAME,QACRF,EAAM,GAAGG,OAEb,CAhBAX,EAAK,aAAc,iCAAkCI,GAASQ,QAAQ,SAAUC,GAC9Ef,EAAEe,GAASC,MAAM,WACf,IAAIC,EAAUjB,EAAEkB,MAAMC,KAAK,aACvBT,EAAQV,EAAE,IAAMiB,GAASN,KAAK,+BAC9BD,EAAME,QACRF,EAAM,GAAGG,OAEb,EACF,GA8BAb,EAAEoB,UAAUC,GAAG,QAAS,8BAA+B,SAAUC,GAC/D,IAAIb,EAAQT,EAAEkB,MAAMK,QAAQ,WAC5Bf,EAAmBC,GAEC,CAClB,qFACA,8FAGYK,QAAQ,SAAUU,GAC1Bf,EAAME,KAAKa,GAAUZ,SACvBU,EAAMG,iBACNH,EAAMI,kBACNzB,EAAO0B,gBAAgBlB,EAAMmB,IAAI,GAAI3B,EAAOM,UAC5CsB,SAASC,SAEb,EACF,GAEA9B,EAAEoB,UAAUC,GAAG,mBAAoB,SAAUC,GAC3C,IAtCIS,EAuCJvB,EADYR,EAAEsB,EAAMU,UAtChBD,EAAc/B,EAAE,uFACJY,QACdZ,EAAEiC,KAAK,CACLC,IAAKH,EAAYI,KAAK,YACtBC,KAAM,MACNC,QAAS,SAAUC,GACjB,IAAIC,EAAUvC,EAAEsC,GAAU3B,KAAK,sFAAsF6B,OACrHvC,EAAO0B,gBAAgBI,EAAYH,IAAI,GAAI3B,EAAOM,UAClDwB,EAAYS,KAAKD,GACjBtC,EAAOwC,gBAAgBV,EAAYH,IAAI,GAAI3B,EAAOM,SACpD,EACAmC,MAAO,WACLC,QAAQD,MAAM,qBAChB,GA4BN,GAEA1C,EAAEoB,UAAUC,GAAG,iBAAkB,SAAUC,GACzC,IAAIb,EAAQT,EAAEsB,EAAMU,QACpB/B,EAAOwC,gBAAgBhC,EAAMmB,IAAI,GAAI3B,EAAOM,SAC9C,EACF,EAEH,CAxED,CAwEGqC,OAAQ3C,OAAQC","sources":["webpack://tra-components/./src/02-molecule/sq-modal/sq-modal.es6.js"],"sourcesContent":["// @todo this js for the most part should be specific to this site and not part of the component.\n(function ($, Drupal, once) {\n  Drupal.behaviors.modalAlert = {\n    attach: function (context, settings) {\n      once('modalAlert', '.molecule--sq-modal--trigger a', context).forEach(function (element) {\n        $(element).click(function () {\n          var modalId = $(this).attr('data-open');\n          var video = $('#' + modalId).find('.bf-videojs-container video');\n          if (video.length) {\n            video[0].pause();\n          }\n        });\n      });\n\n      // Function to pause and reset brandfolder Video\n      function pauseAndResetVideo(modal) {\n        var video = modal.find('.bf-videojs-container video');\n        if (video.length) {\n          video[0].pause();\n        }\n      }\n\n      // Function to reload the form\n      function reloadForm() {\n        var formWrapper = $('#webform-submission-email-selected-form-wizard-items-block-content-16731-form-ajax');\n        if (formWrapper.length) {\n          $.ajax({\n            url: formWrapper.data('ajax-url'),\n            type: 'GET',\n            success: function (response) {\n              var newForm = $(response).find('#webform-submission-email-selected-form-wizard-items-block-content-16731-form-ajax').html();\n              Drupal.detachBehaviors(formWrapper.get(0), Drupal.settings);\n              formWrapper.html(newForm);\n              Drupal.attachBehaviors(formWrapper.get(0), Drupal.settings);\n            },\n            error: function() {\n              console.error('Form reload failed');\n            }\n          });\n        }\n      }\n\n      $(document).on('click', '.close-button, .okay-button', function (event) {\n        var modal = $(this).closest('.reveal');\n        pauseAndResetVideo(modal);\n\n        var formSelectors = [\n          '#webform-submission-email-selected-form-wizard-items-block-content-16731-form-ajax',\n          '#webform-submission-email-selected-form-wizard-items-block-content-83721-form-ajax-content'\n        ];\n\n        formSelectors.forEach(function (selector) {\n          if (modal.find(selector).length) {\n            event.preventDefault();\n            event.stopPropagation();\n            Drupal.detachBehaviors(modal.get(0), Drupal.settings);\n            location.reload();\n          }\n        });\n      });\n\n      $(document).on('closed.zf.reveal', function (event) {\n        var modal = $(event.target);\n        pauseAndResetVideo(modal);\n        reloadForm();\n      });\n\n      $(document).on('open.zf.reveal', function (event) {\n        var modal = $(event.target);\n        Drupal.attachBehaviors(modal.get(0), Drupal.settings);\n      });\n    }\n  };\n})(jQuery, Drupal, once);"],"names":["$","Drupal","once","behaviors","modalAlert","attach","context","settings","pauseAndResetVideo","modal","video","find","length","pause","forEach","element","click","modalId","this","attr","document","on","event","closest","selector","preventDefault","stopPropagation","detachBehaviors","get","location","reload","formWrapper","target","ajax","url","data","type","success","response","newForm","html","attachBehaviors","error","console","jQuery"],"sourceRoot":""}